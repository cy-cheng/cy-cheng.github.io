<script>
    console.log("DEBUG: Date Fix Script Loaded");
    document.addEventListener('DOMContentLoaded', function () {
        // Selector for the date paragraph in the resume/biography block
        const dateElements = document.querySelectorAll('.resume-biography .text-gray-500.text-sm.mt-2');

        if (dateElements.length > 0) {
            console.log("DEBUG: Found " + dateElements.length + " date elements to fix.");
        } else {
            console.log("DEBUG: No date elements found matching selector.");
            // Fallback selector attempt?
            // const fallback = document.querySelectorAll('.text-gray-500.text-sm.mt-2');
        }

        dateElements.forEach(function (el) {
            let html = el.innerHTML;
            console.log("DEBUG: Original HTML:", html);

            // Regex to match "YYYY-MM-DD" -> "DD/MM/YYYY"
            // Handles replacing multiple occurrences
            html = html.replace(/(\d{4})-(\d{2})-(\d{2})/g, function (match, year, month, day) {
                return day + '/' + month + '/' + year;
            });

            // Replace the <br> separator with " ~ "
            html = html.replace(/<br\s*\/?>/gi, ' ~ ');

            // Replace newline characters if they exist
            html = html.replace(/\n/g, ' ~ ');

            // Normalize spaces
            html = html.replace(/\s*~\s*/g, ' ~ ');

            // Handle "Now" logic if end date is missing (optional enhancement based on logic)
            // For now, just reformat what is there.

            console.log("DEBUG: New HTML:", html);
            el.innerHTML = html;
            // Removing the green color style I thought of - better to look native if it works.
            // el.style.color = 'green'; 
        });
    });
</script>